{"mappings":"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","sources":["src/js/library.js","src/js/plug-for-library.js","src/js/library-buttons.js"],"sourcesContent":["import './refs';\nimport { getWatchedItems } from './library-buttons';\nimport { createFilmsGallery } from './markups';\nimport pagination from './pagination';\nimport './plug-for-library';\nimport './modal';\n\nimport { gallery } from './refs';\nimport { topFunction } from './functions';\nimport modalteam from './modalteam';\n\n//const pagin = pagination();\nconst paginate = (array, pageSize, pageNumber) => {\n  return array.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n};\nlet totalPages;\n\ngetWatchedItems();\n// рендерим пагинацию остальных страниц\npagination.on('beforeMove', event => {\n  topFunction();\n  // получаем номер активной страницы на кнопках\n  const currentPage = event.page;\n\n  // создаем массив для рендера по 20 айтемов на страницу\n  const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n\n  const markup = createFilmsGallery(arrayForMarkup);\n  gallery.innerHTML = markup;\n});\n","const plugContainer = document.querySelector('.plug')\n hidePlug ()\n\nconst COLOR_LIST = ['#ff6b01'];\nlet $targetList;\n\nconst init = () => {\n  $targetList = document.querySelectorAll('[data-js=\"reveal\"]');\n\n  setup();\n\n  window.addEventListener('scroll', onScroll, false);\n  window.dispatchEvent(new Event('scroll'));\n};\n\nconst getArrayRandomValue = array =>\n  array[Math.floor(Math.random() * array.length)];\n\nconst setup = () => {\n  for (const $target of $targetList) {\n    const content = $target.innerHTML;\n    const color =\n      'revealColor' in $target.dataset\n        ? $target.dataset.revealColor\n        : getArrayRandomValue(COLOR_LIST);\n    $target.innerHTML = `<span data-reveal=\"content\"><div data-reveal=\"cover\" style=\"background-color:${color}\"></div><span data-reveal=\"text\">${content}</span></span>`;\n  }\n};\n\nconst onScroll = () => {\n  const windowH = window.innerHeight;\n  const scrollTop =\n    document.documentElement.scrollTop || document.body.scrollTop;\n  const isMostScroll = document.body.clientHeight <= scrollTop + windowH;\n\n  for (const $target of $targetList) {\n    if ($target.classList.contains('loaded')) continue;\n\n    const rect = $target.getBoundingClientRect();\n    const top = rect.top + scrollTop;\n    if (isMostScroll || top <= scrollTop + windowH * 0.8)\n      $target.classList.add('loaded');\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', init, false);\n\n\n\n\nfunction hidePlug (){\n  const storageW = localStorage.getItem('watched')\nconst storageQ = localStorage.getItem('queue')\n  \n  if (storageW.length !== 2 || storageQ.length !== 2) {\n    plugContainer.remove()\n  }\n}","import { createFilmsGallery } from './markups';\nimport { onHoverBtnCLick } from './local-storage';\nimport pagination from './pagination';\nimport { deletePageButton } from './pagination-layout';\nimport { topFunction } from './functions';\nimport { pag, gallery, cardModal } from './refs';\nimport './plug-for-library';\n\nconst queueBtn = document.querySelector('[data-queue=\"data-queue\"]');\nconst watchedBtn = document.querySelector('[data-watched=\"data-watched\"]');\nlet tab = 'watched';\nlet totalPages;\n\nqueueBtn.addEventListener('click', onclickQueue);\nwatchedBtn.addEventListener('click', onClickWatched);\nqueueBtn.disabled = false;\n\n// функция, которая режет массив\nconst paginate = (array, pageSize, pageNumber) => {\n  return array.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n};\n\n// функции получения данных из локалстора и рендеринга их\n\nexport function getWatchedItems() {\n  tab = 'watched';\n  const watchedMovies = localStorage.getItem('watched');\n  let arrayOFWatched = JSON.parse(watchedMovies) || [];\n  const total = arrayOFWatched.length;\n  // получаем количество страниц для пагинации\n  totalPages = Math.ceil(total / 20);\n\n  // включаем пагинацию если больше 20 фильмов\n  if (arrayOFWatched.length > 20) {\n    pag.classList.remove('is-hidden');\n  } else if (arrayOFWatched.length <= 20) {\n    pag.classList.add('is-hidden');\n  }\n\n  // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(\n    paginate(arrayOFWatched, 20, 1),\n    false,\n    true,\n    'watched'\n  );\n  gallery.innerHTML = markup;\n  pagination.reset(total);\n  // рендер кастомной пагинации\n  renderPagin();\n  // рендер кастомной пагинации при переключении страниц\n  pagination.on('afterMove', renderPagin);\n  return arrayOFWatched;\n}\n\nfunction getQueueItems() {\n  tab = 'queue';\n  const queueMovies = localStorage.getItem('queue');\n  let arrayOFQueue = JSON.parse(queueMovies) || [];\n  const total = arrayOFQueue.length;\n  // получаем количество страниц для пагинации\n  totalPages = Math.ceil(total / 20);\n\n  // включаем пагинацию если больше 20 фильмов\n  if (arrayOFQueue.length > 20) {\n    pag.classList.remove('is-hidden');\n  } else if (arrayOFQueue.length <= 20) {\n    pag.classList.add('is-hidden');\n  }\n\n  // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(\n    paginate(arrayOFQueue, 20, 1),\n    false,\n    true,\n    'queue'\n  );\n  gallery.innerHTML = markup;\n  pagination.reset(total);\n  // рендер кастомной пагинации\n  renderPagin();\n  // рендер кастомной пагинации при переключении страниц\n  pagination.on('afterMove', renderPagin);\n  return arrayOFQueue;\n}\n\n// функции нажатия на кнопки\n\nfunction onClickWatched() {\n  getWatchedItems();\n\n  // рендерим пагинацию остальных страниц\n  pagination.on('beforeMove', event => {\n    topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n    const markup = createFilmsGallery(arrayForMarkup, false, true, 'watched');\n    gallery.innerHTML = markup;\n  });\n\n  // вкл/выкл кнопок\n  queueBtn.disabled = false;\n  queueBtn.classList.remove('active');\n  watchedBtn.classList.add('active');\n  watchedBtn.disabled = true;\n}\n\nfunction onclickQueue() {\n  getQueueItems();\n\n  // рендерим пагинацию остальных страниц\n  pagination.on('beforeMove', event => {\n    topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getQueueItems(), 20, currentPage);\n    const markup = createFilmsGallery(arrayForMarkup, false, true, 'queue');\n    gallery.innerHTML = markup;\n  });\n\n  // вкл/выкл кнопок\n  watchedBtn.disabled = false;\n  queueBtn.classList.add('active');\n  watchedBtn.classList.remove('active');\n  queueBtn.disabled = true;\n}\n\ngallery.addEventListener('click', clickBtn);\ncardModal.addEventListener('click', clickBtn);\n\nfunction clickBtn(e) {\n  onHoverBtnCLick(e);\n  if (tab === 'watched') {\n    onClickWatched();\n  } else {\n    onclickQueue();\n  }\n}\n\n// функция рендера кастомной пагинации\nfunction renderPagin() {\n  const first = document.querySelector('.tui-ico-first');\n  if (null !== first) {\n    first.textContent = '1';\n  }\n\n  const last = document.querySelector('.tui-pagination .tui-ico-last');\n  if (null !== last) {\n    last.textContent = totalPages;\n  }\n\n  deletePageButton(1, '.tui-first');\n  deletePageButton(totalPages, '.tui-last');\n}\n"],"names":["storageW","storageQ","$4Nugj","parcelRequire","$LW3sO","$103f778c81e94144$var$plugContainer","document","querySelector","localStorage","getItem","length","remove","$103f778c81e94144$var$$targetList","$103f778c81e94144$var$COLOR_LIST","$103f778c81e94144$var$setup","array","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","$target","value","content","innerHTML","color","dataset","revealColor","Math","floor","random","concat","err","return","$103f778c81e94144$var$onScroll","windowH","window","innerHeight","scrollTop","documentElement","body","isMostScroll","clientHeight","classList","contains","top","getBoundingClientRect","add","addEventListener","querySelectorAll","dispatchEvent","Event","$30be1b8188bd888b$var$totalPages","$30be1b8188bd888b$var$queueBtn","$30be1b8188bd888b$var$watchedBtn","$30be1b8188bd888b$var$tab","$30be1b8188bd888b$var$onclickQueue","$30be1b8188bd888b$var$onClickWatched","disabled","$30be1b8188bd888b$var$paginate","pageSize","pageNumber","slice","$30be1b8188bd888b$export$d72a0d389166c6d4","watchedMovies","arrayOFWatched","JSON","parse","total","ceil","pag","markup","createFilmsGallery","gallery","$jcFG7","default","reset","$30be1b8188bd888b$var$renderPagin","on","$30be1b8188bd888b$var$getQueueItems","queueMovies","arrayOFQueue","event","$cKDzr","topFunction","currentPage","page","arrayForMarkup","$30be1b8188bd888b$var$clickBtn","e","$4LMMA","onHoverBtnCLick","first","textContent","last","$3y4PE","deletePageButton","cardModal"],"version":3,"file":"library.7f197df3.js.map"}