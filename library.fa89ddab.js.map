{"mappings":"oeAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,uCAMA,MAAME,EAAWC,SAASC,cAAc,6BAClCC,EAAaF,SAASC,cAAc,iCAE1CF,EAASI,iBAAiB,SAiF1B,SAAsBC,GAClBC,IAGiCC,EAA3BC,GAAG,cAAcC,KACnB,EAAAC,EAAAC,eAEkC,MAAhCC,EAAcH,EAAMI,KAEpBC,EAAiBC,EAAST,IAAiB,GAAIM,GACrDI,QAAQC,IAAIH,GACZ,MAAMI,GAAS,EAAAnB,EAAAoB,oBAAmBL,GAClCM,EAAAC,QAAQC,UAAYJ,KAItBf,EAAWoB,UAAW,EACtBvB,EAASwB,UAAUC,IAAI,UACvBtB,EAAWqB,UAAUE,OAAO,UAC5B1B,EAASuB,UAAW,KAnGtBpB,EAAWC,iBAAiB,SAyDN,SAAEC,GACpBsB,IAGiCpB,EAA3BC,GAAG,cAAcC,KACnB,EAAAC,EAAAC,eAEkC,MAAhCC,EAAcH,EAAMI,KAEpBC,EAAiBC,EAASY,IAAmB,GAAIf,GACvDI,QAAQC,IAAIH,GACZ,MAAMI,GAAS,EAAAnB,EAAAoB,oBAAmBL,GAClCM,EAAAC,QAAQC,UAAYJ,KAITlB,EAAJuB,UAAW,EACpBvB,EAASwB,UAAUE,OAAO,UAC1BvB,EAAWqB,UAAUC,IAAI,UACzBtB,EAAWoB,UAAW,KA3ExBvB,EAASuB,UAAW,EAII,MAAlBhB,GAAQ,EAAAqB,EAAAC,cAGRd,EAAW,CAACe,EAAOC,EAAUC,IAC1BF,EAAMG,OAAOD,EAAa,GAAKD,EAAUC,EAAaD,GAKxD,SAASJ,IACd,MAAMO,EAAgBC,aAAaC,QAAQ,WACzC,IAAIC,EAAiBC,KAAKC,MAAML,GAChC,MAAMM,EAAQH,EAAeI,OAGzBJ,EAAeI,OAAS,GACxBrB,EAAAsB,IAAIlB,UAAUE,OAAO,aACdW,EAAeI,QAAU,IACjCrB,EAAAsB,IAAIlB,UAAUC,IAAI,aAIF,MAAfP,GAAS,EAAAnB,EAAAoB,oBAAmBJ,EAASsB,EAAgB,GAAI,IAG/D,OAFAjB,EAAAC,QAAQC,UAAYJ,EACpBX,EAAMoC,MAAMH,GACLH,EAIT,SAAS/B,IACP,MAAMsC,EAAcT,aAAaC,QAAQ,SACvC,IAAIS,EAAeP,KAAKC,MAAMK,GAC9B,MAAMJ,EAAQK,EAAaJ,OAGtBI,EAAaJ,OAAS,GACvBrB,EAAAsB,IAAIlB,UAAUE,OAAO,aACdmB,EAAaJ,QAAU,IAC/BrB,EAAAsB,IAAIlB,UAAUC,IAAI,aAIF,MAAfP,GAAS,EAAAnB,EAAAoB,oBAAmBJ,EAAS8B,EAAc,GAAI,IAG7D,OAFAzB,EAAAC,QAAQC,UAAYJ,EACpBX,EAAMoC,MAAMH,GACLK,E,0BC5DT,MAAMC,EAAa,CAAC,WACpB,IAAIC,EAEJ,MAaMC,EAAQ,KAEb,IAAK,MAAMC,KAAWF,EAAa,CAElC,MAAMG,EAAUD,EAAQ3B,UAClB6B,EAAU,gBAAiBF,EAAQG,QAAUH,EAAQG,QAAQC,aAPxCvB,EAO0EgB,GAP1DQ,KAAKC,MAAMD,KAAKE,SAAW1B,EAAMW,SAQ5EQ,EAAQ3B,UAAY,gFAAgF6B,qCAAyCD,kBARnH,IAACpB,GAcvB2B,EAAW,KAEhB,MAAMC,EAAeC,OAAOC,YACtBC,EAAe5D,SAAS6D,gBAAgBD,WAAa5D,SAAS8D,KAAKF,UACnEG,EAAe/D,SAAS8D,KAAKE,cAAgBJ,EAAYH,EAE/D,IAAK,MAAMT,KAAWF,EAAa,CAElC,GAAIE,EAAQzB,UAAU0C,SAAS,UAAW,SAE1C,MACMC,EADOlB,EAAQmB,wBACHD,IAAMN,GACpBG,GAAgBG,GAAON,EAAuB,GAAVH,IAAeT,EAAQzB,UAAUC,IAAI,YAM/ExB,SAASG,iBAAiB,oBA3Cb,KAEZ2C,EAAc9C,SAASoE,iBAAiB,sBAExCrB,IAEAW,OAAOvD,iBAAiB,SAASqD,GAAS,GAC1CE,OAAOW,cAAc,IAAIC,MAAM,cAoCkB,GFvClD,MAAMC,GAAQ,EAAA5C,EAAAC,cAEdF,IAEmC6C,EAA3BhE,GAAG,cAAcC,IAEiB,MAAhCG,EAAcH,EAAMI,KAEpBC,EAAiB2D,SAAS9C,IAAmB,GAAIf,GACvDI,QAAQC,IAAIH,GACZ,MAAMI,GAAS,EAAAnB,EAAAoB,oBAAmBL,GAClCO,QAAQC,UAAYJ","sources":["src/js/library.js","src/js/library-buttons.js","src/js/plug-for-library.js"],"sourcesContent":["import './refs';\nimport { getWatchedItems } from './library-buttons';\nimport { createFilmsGallery } from './markups';\nimport { pagination } from './pagination';\nimport './plug-for-library';\n\n\nconst pagin = pagination();\n\ngetWatchedItems();\n  // рендерим пагинацию остальных страниц\n  pagin.on('beforeMove', event => {\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n    console.log(arrayForMarkup);\n    const markup = createFilmsGallery(arrayForMarkup);\n    gallery.innerHTML = markup;\n  });","import { createFilmsGallery } from './markups';\nimport { pagination } from './pagination';\nimport { topFunction } from './functions';\nimport { pag, gallery } from './refs';\n\n\nconst queueBtn = document.querySelector('[data-queue=\"data-queue\"]');\nconst watchedBtn = document.querySelector('[data-watched=\"data-watched\"]');\n\nqueueBtn.addEventListener('click', onclickQueue);\nwatchedBtn.addEventListener('click', onClickWatched);\nqueueBtn.disabled = false;\n\n\n// вызываем функцию пагинации\nconst pagin = pagination();\n\n// функция, которая режет массив\nconst paginate = (array, pageSize, pageNumber) => {\n  return array.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n};\n\n// функции получения данных из локалстора и рендеринга их\n\nexport function getWatchedItems() {\n  const watchedMovies = localStorage.getItem('watched');\n    let arrayOFWatched = JSON.parse(watchedMovies);\n    const total = arrayOFWatched.length;\n\n    // включаем пагинацию если больше 20 фильмов\n    if (arrayOFWatched.length > 20) {\n        pag.classList.remove('is-hidden');\n    } else if (arrayOFWatched.length <= 20) {\n       pag.classList.add('is-hidden'); \n    }\n\n  // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(paginate(arrayOFWatched, 20, 1));\n  gallery.innerHTML = markup;\n  pagin.reset(total);\n  return arrayOFWatched;\n}\n\n\nfunction getQueueItems() {\n  const queueMovies = localStorage.getItem('queue');\n    let arrayOFQueue = JSON.parse(queueMovies);\n    const total = arrayOFQueue.length;\n    \n  // включаем пагинацию если больше 20 фильмов\n     if (arrayOFQueue.length > 20) {\n        pag.classList.remove('is-hidden');\n    } else if (arrayOFQueue.length <= 20) {\n       pag.classList.add('is-hidden'); \n     }\n    \n    // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(paginate(arrayOFQueue, 20, 1));\n  gallery.innerHTML = markup;\n  pagin.reset(total);\n  return arrayOFQueue;\n}\n\n\n\n// функции нажатия на кнопки \n\nfunction onClickWatched(e) {\n    getWatchedItems();\n    \n    // рендерим пагинацию остальных страниц\n    pagin.on('beforeMove', event => {\n        topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n    console.log(arrayForMarkup);\n    const markup = createFilmsGallery(arrayForMarkup);\n    gallery.innerHTML = markup;\n    });\n\n    // вкл/выкл кнопок\n  queueBtn.disabled = false;\n  queueBtn.classList.remove('active');\n  watchedBtn.classList.add('active');\n  watchedBtn.disabled = true;\n};\n\n\nfunction onclickQueue(e) {\n    getQueueItems();\n    \n    // рендерим пагинацию остальных страниц\n    pagin.on('beforeMove', event => {\n        topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getQueueItems(), 20, currentPage);\n    console.log(arrayForMarkup);\n    const markup = createFilmsGallery(arrayForMarkup);\n    gallery.innerHTML = markup;\n    });\n\n    // вкл/выкл кнопок\n  watchedBtn.disabled = false;\n  queueBtn.classList.add('active');\n  watchedBtn.classList.remove('active');\n  queueBtn.disabled = true;\n}\n\n\n","const COLOR_LIST = ['#ff6b01'];\nlet $targetList;\n\nconst init = () => {\n\n $targetList = document.querySelectorAll('[data-js=\"reveal\"]');\n\n setup();\n\n window.addEventListener('scroll',onScroll,false);\n window.dispatchEvent(new Event('scroll'));\n\n}\n\nconst getArrayRandomValue = (array) => array[Math.floor(Math.random() * array.length)];\n\nconst setup = () => {\n\n for (const $target of $targetList) {\n\n  const content = $target.innerHTML;\n  const color   = 'revealColor' in $target.dataset ? $target.dataset.revealColor : getArrayRandomValue(COLOR_LIST);\n  $target.innerHTML = `<span data-reveal=\"content\"><div data-reveal=\"cover\" style=\"background-color:${color}\"></div><span data-reveal=\"text\">${content}</span></span>`;\n\n }\n\n}\n\nconst onScroll = () => {\n\n const windowH      = window.innerHeight;\n const scrollTop    = document.documentElement.scrollTop || document.body.scrollTop;\n const isMostScroll = document.body.clientHeight <= scrollTop + windowH;\n\n for (const $target of $targetList) {\n\n  if ($target.classList.contains('loaded')) continue;\n\n  const rect = $target.getBoundingClientRect();\n  const top  = rect.top + scrollTop;\n  if (isMostScroll || top <= scrollTop + (windowH * .8)) $target.classList.add('loaded');\n\n }\n\n}\n\ndocument.addEventListener('DOMContentLoaded',init,false);"],"names":["parcelRequire","$fA0uA","$b9e6b9b2c2f99fcc$var$queueBtn","document","querySelector","$b9e6b9b2c2f99fcc$var$watchedBtn","addEventListener","e","$b9e6b9b2c2f99fcc$var$getQueueItems","$b9e6b9b2c2f99fcc$var$pagin","on","event","$gXu43","topFunction","currentPage","page","arrayForMarkup","$b9e6b9b2c2f99fcc$var$paginate","console","log","markup","createFilmsGallery","$krGWQ","gallery","innerHTML","disabled","classList","add","remove","$b9e6b9b2c2f99fcc$export$d72a0d389166c6d4","$2nhTy","pagination","array","pageSize","pageNumber","slice","watchedMovies","localStorage","getItem","arrayOFWatched","JSON","parse","total","length","pag","reset","queueMovies","arrayOFQueue","$9625bde4e5259b06$var$COLOR_LIST","$9625bde4e5259b06$var$$targetList","$9625bde4e5259b06$var$setup","$target","content","color","dataset","revealColor","Math","floor","random","$9625bde4e5259b06$var$onScroll","windowH","window","innerHeight","scrollTop","documentElement","body","isMostScroll","clientHeight","contains","top","getBoundingClientRect","querySelectorAll","dispatchEvent","Event","$1cafa503bc57b7a0$var$pagin","paginate"],"version":3,"file":"library.fa89ddab.js.map"}