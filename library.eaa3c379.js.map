{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,S,iEAOA,MAAME,EAAWC,SAASC,cAAc,6BAClCC,EAAaF,SAASC,cAAc,iCAC1C,IACIE,EADAC,EAAM,UAGVL,EAASM,iBAAiB,QAASC,GACnCJ,EAAWG,iBAAiB,QAASE,GACrCR,EAASS,UAAW,EAGK,MAAnBC,EAAW,CAACC,EAAOC,EAAUC,IAC1BF,EAAMG,OAAOD,EAAa,GAAKD,EAAUC,EAAaD,GAKxD,SAASG,IACdV,EAAM,UACN,MAAMW,EAAgBC,aAAaC,QAAQ,WAC3C,IAAIC,EAAiBC,KAAKC,MAAML,IAAkB,GAClD,MAAMM,EAAQH,EAAeI,OAEQnB,EAAxBoB,KAAKC,KAAKH,EAAQ,IAG3BH,EAAeI,OAAS,GAC1B1B,EAAA6B,IAAIC,UAAUC,OAAO,aACZT,EAAeI,QAAU,IAClC1B,EAAA6B,IAAIC,UAAUE,IAAI,aAIC,MAAfC,GAAS,EAAA/B,EAAAgC,oBACbrB,EAASS,EAAgB,GAAI,IAC7B,GACA,EACA,WAQF,OANAtB,EAAAmC,QAAQC,UAAYH,EACpBI,EAAAC,QAAWC,MAAMd,GAEOe,IAExBH,EAAAC,QAAWG,GAAG,YAAaD,GACpBlB,EAGT,SAASoB,IACPlC,EAAM,QACN,MAAMmC,EAAcvB,aAAaC,QAAQ,SACzC,IAAIuB,EAAerB,KAAKC,MAAMmB,IAAgB,GAC9C,MAAMlB,EAAQmB,EAAalB,OAEUnB,EAAxBoB,KAAKC,KAAKH,EAAQ,IAG3BmB,EAAalB,OAAS,GACxB1B,EAAA6B,IAAIC,UAAUC,OAAO,aACZa,EAAalB,QAAU,IAChC1B,EAAA6B,IAAIC,UAAUE,IAAI,aAIC,MAAfC,GAAS,EAAA/B,EAAAgC,oBACbrB,EAAS+B,EAAc,GAAI,IAC3B,GACA,EACA,SAQF,OANA5C,EAAAmC,QAAQC,UAAYH,EACpBI,EAAAC,QAAWC,MAAMd,GAEOe,IAExBH,EAAAC,QAAWG,GAAG,YAAaD,GACpBI,EAKa,SAAbjC,IACPO,IAGAmB,EAAAC,QAAWG,GAAG,cAAcI,KAC1B,EAAAC,EAAAC,eAEsC,MAAhCC,EAAcH,EAAMI,KAEpBC,EAAiBrC,EAASK,IAAmB,GAAI8B,GACjDf,GAAS,EAAA/B,EAAAgC,oBAAmBgB,GAAgB,GAAO,EAAM,WAC/DlD,EAAAmC,QAAQC,UAAYH,KAIT9B,EAAJS,UAAW,EACpBT,EAAS2B,UAAUC,OAAO,UAC1BzB,EAAWwB,UAAUE,IAAI,UACzB1B,EAAWM,UAAW,EAGxB,SAASF,IACPgC,IAGAL,EAAAC,QAAWG,GAAG,cAAcI,KAC1B,EAAAC,EAAAC,eAEsC,MAAhCC,EAAcH,EAAMI,KAEpBC,EAAiBrC,EAAS6B,IAAiB,GAAIM,GAC/Cf,GAAS,EAAA/B,EAAAgC,oBAAmBgB,GAAgB,GAAO,EAAM,SAC/DlD,EAAAmC,QAAQC,UAAYH,KAIT3B,EAAFM,UAAW,EACtBT,EAAS2B,UAAUE,IAAI,UACvB1B,EAAWwB,UAAUC,OAAO,UAC5B5B,EAASS,UAAW,EAMtB,SAASuC,EAASC,IAChB,EAAAC,EAAAC,iBAAgBF,GACJ,YAAR5C,EACFG,IAEAD,IAKJ,SAAS8B,IACP,MAAMe,EAAQnD,SAASC,cAAc,kBACjC,OAASkD,IACXA,EAAMC,YAAc,KAGtB,MAAMC,EAAOrD,SAASC,cAAc,iCAChC,OAASoD,IACXA,EAAKD,YAAcjD,IAGrB,EAAAmD,EAAAC,kBAAiB,EAAG,eACpB,EAAAD,EAAAC,kBAAiBpD,EAAY,aAzB/BP,EAAAmC,QAAQ1B,iBAAiB,QAAS0C,GAClCnD,EAAA4D,UAAUnD,iBAAiB,QAAS0C,G,qCClIpC,MAAMU,EAAgBzD,SAASC,cAAc,SAmDvCe,aAAaM,OAAS,GACxBmC,EAAc9B,SAjDlB,MAAM+B,EAAa,CAAC,WACpB,IAAIC,EAEJ,MAYMC,EAAQ,KACZ,IAAK,MAAMC,KAAWF,EAAa,CACjC,MAAMG,EAAUD,EAAQ7B,UAClB+B,EACJ,gBAAiBF,EAAQG,QACrBH,EAAQG,QAAQC,aAREvD,EASEgD,GARtBnC,KAAK2C,MAAM3C,KAAK4C,SAAWzD,EAAMY,SASrCuC,EAAQ7B,UAAY,gFAAgF+B,qCAAyCD,kBAVrH,IAAApD,GActB0D,EAAW,KACf,MAAMC,EAAUC,OAAOC,YACjBC,EACJxE,SAASyE,gBAAgBD,WAAaxE,SAAS0E,KAAKF,UAChDG,EAAe3E,SAAS0E,KAAKE,cAAgBJ,EAAYH,EAE/D,IAAK,MAAMR,KAAWF,EAAa,CACjC,GAAIE,EAAQnC,UAAUmD,SAAS,UAAW,SAE1C,MACMC,EADOjB,EAAQkB,wBACJD,IAAMN,GACnBG,GAAgBG,GAAON,EAAsB,GAAVH,IACrCR,EAAQnC,UAAUE,IAAI,YAI5B5B,SAASK,iBAAiB,oBAvCb,KACXsD,EAAc3D,SAASgF,iBAAiB,sBAExCpB,IAEAU,OAAOjE,iBAAiB,SAAU+D,GAAU,GAC5CE,OAAOW,cAAc,IAAIC,MAAM,cAiCmB,G,6DF1BpDpE,IAEAmB,EAAAC,QAAWG,GAAG,cAAcI,KAC1B,EAAAC,EAAAC,eAEsC,MAAhCC,EAAcH,EAAMI,KAGpBC,GAbUpC,EAagBI,IAbTH,EAa4B,GAblBC,EAasBgC,EAZhDlC,EAAMG,OAAOD,EAAa,GAAKD,EAAUC,EAAaD,IAD9C,IAACD,EAAOC,EAAUC,EAejC,MAAMiB,GAAS,EAAA/B,EAAAgC,oBAAmBgB,GAClClD,EAAAmC,QAAQC,UAAYH","sources":["src/js/library.js","src/js/library-buttons.js","src/js/plug-for-library.js"],"sourcesContent":["import './refs';\nimport { getWatchedItems } from './library-buttons';\nimport { createFilmsGallery } from './markups';\nimport pagination from './pagination';\nimport { deletePageButton } from './pagination-layout';\nimport './plug-for-library';\nimport { createModalFilm } from './markups';\nimport './modal';\n\nimport { gallery } from './refs';\nimport { topFunction } from './functions';\nimport modalteam from './modalteam';\n\n//const pagin = pagination();\nconst paginate = (array, pageSize, pageNumber) => {\n  return array.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n};\nlet totalPages;\n\ngetWatchedItems();\n// рендерим пагинацию остальных страниц\npagination.on('beforeMove', event => {\n  topFunction();\n  // получаем номер активной страницы на кнопках\n  const currentPage = event.page;\n\n  // создаем массив для рендера по 20 айтемов на страницу\n  const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n\n  const markup = createFilmsGallery(arrayForMarkup);\n  gallery.innerHTML = markup;\n});\n\n// pagination.on('afterMove', event => {\n//   topFunction();\n//   // получаем номер активной страницы на кнопках\n//   const currentPage = event.page;\n\n//   // создаем массив для рендера по 20 айтемов на страницу\n//   const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n\n//   totalPages = Math.ceil(arrayForMarkup.length / 20);\n\n//   const first = document.querySelector('.tui-ico-first');\n//   if (null !== first) {\n//     first.textContent = '1';\n//   }\n\n//   const last = document.querySelector('.tui-pagination .tui-ico-last');\n//   if (null !== last) {\n//     last.textContent = totalPages;\n//   }\n\n//   deletePageButton(1, '.tui-first');\n//   deletePageButton(totalPages, '.tui-last');\n\n//   // const markup = createFilmsGallery(arrayForMarkup);\n//   // gallery.innerHTML = markup;\n// });\n\n// function renderPagin() {\n//   first();\n\n//   const last = document.querySelector('.tui-pagination .tui-ico-last');\n\n//   last.textContent = totalPages;\n\n//   deletePageButton(1, '.tui-first');\n//   deletePageButton(totalPages, '.tui-last');\n// }\n","import { createFilmsGallery } from './markups';\nimport { onHoverBtnCLick } from './local-storage';\nimport pagination from './pagination';\nimport { deletePageButton } from './pagination-layout';\nimport { topFunction } from './functions';\nimport { pag, gallery, cardModal } from './refs';\n\nconst queueBtn = document.querySelector('[data-queue=\"data-queue\"]');\nconst watchedBtn = document.querySelector('[data-watched=\"data-watched\"]');\nlet tab = 'watched';\nlet totalPages;\n\nqueueBtn.addEventListener('click', onclickQueue);\nwatchedBtn.addEventListener('click', onClickWatched);\nqueueBtn.disabled = false;\n\n// функция, которая режет массив\nconst paginate = (array, pageSize, pageNumber) => {\n  return array.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n};\n\n// функции получения данных из локалстора и рендеринга их\n\nexport function getWatchedItems() {\n  tab = 'watched';\n  const watchedMovies = localStorage.getItem('watched');\n  let arrayOFWatched = JSON.parse(watchedMovies) || [];\n  const total = arrayOFWatched.length;\n  // получаем количество страниц для пагинации\n  totalPages = Math.ceil(total / 20);\n\n  // включаем пагинацию если больше 20 фильмов\n  if (arrayOFWatched.length > 20) {\n    pag.classList.remove('is-hidden');\n  } else if (arrayOFWatched.length <= 20) {\n    pag.classList.add('is-hidden');\n  }\n\n  // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(\n    paginate(arrayOFWatched, 20, 1),\n    false,\n    true,\n    'watched'\n  );\n  gallery.innerHTML = markup;\n  pagination.reset(total);\n  // рендер кастомной пагинации\n  renderPagin();\n  // рендер кастомной пагинации при переключении страниц\n  pagination.on('afterMove', renderPagin);\n  return arrayOFWatched;\n}\n\nfunction getQueueItems() {\n  tab = 'queue';\n  const queueMovies = localStorage.getItem('queue');\n  let arrayOFQueue = JSON.parse(queueMovies) || [];\n  const total = arrayOFQueue.length;\n  // получаем количество страниц для пагинации\n  totalPages = Math.ceil(total / 20);\n\n  // включаем пагинацию если больше 20 фильмов\n  if (arrayOFQueue.length > 20) {\n    pag.classList.remove('is-hidden');\n  } else if (arrayOFQueue.length <= 20) {\n    pag.classList.add('is-hidden');\n  }\n\n  // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(\n    paginate(arrayOFQueue, 20, 1),\n    false,\n    true,\n    'queue'\n  );\n  gallery.innerHTML = markup;\n  pagination.reset(total);\n  // рендер кастомной пагинации\n  renderPagin();\n  // рендер кастомной пагинации при переключении страниц\n  pagination.on('afterMove', renderPagin);\n  return arrayOFQueue;\n}\n\n// функции нажатия на кнопки\n\nfunction onClickWatched() {\n  getWatchedItems();\n\n  // рендерим пагинацию остальных страниц\n  pagination.on('beforeMove', event => {\n    topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n    const markup = createFilmsGallery(arrayForMarkup, false, true, 'watched');\n    gallery.innerHTML = markup;\n  });\n\n  // вкл/выкл кнопок\n  queueBtn.disabled = false;\n  queueBtn.classList.remove('active');\n  watchedBtn.classList.add('active');\n  watchedBtn.disabled = true;\n}\n\nfunction onclickQueue() {\n  getQueueItems();\n\n  // рендерим пагинацию остальных страниц\n  pagination.on('beforeMove', event => {\n    topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getQueueItems(), 20, currentPage);\n    const markup = createFilmsGallery(arrayForMarkup, false, true, 'queue');\n    gallery.innerHTML = markup;\n  });\n\n  // вкл/выкл кнопок\n  watchedBtn.disabled = false;\n  queueBtn.classList.add('active');\n  watchedBtn.classList.remove('active');\n  queueBtn.disabled = true;\n}\n\ngallery.addEventListener('click', clickBtn);\ncardModal.addEventListener('click', clickBtn);\n\nfunction clickBtn(e) {\n  onHoverBtnCLick(e);\n  if (tab === 'watched') {\n    onClickWatched();\n  } else {\n    onclickQueue();\n  }\n}\n\n// функция рендера кастомной пагинации\nfunction renderPagin() {\n  const first = document.querySelector('.tui-ico-first');\n  if (null !== first) {\n    first.textContent = '1';\n  }\n\n  const last = document.querySelector('.tui-pagination .tui-ico-last');\n  if (null !== last) {\n    last.textContent = totalPages;\n  }\n\n  deletePageButton(1, '.tui-first');\n  deletePageButton(totalPages, '.tui-last');\n}\n","const plugContainer = document.querySelector('.plug')\n hidePlug ()\n\nconst COLOR_LIST = ['#ff6b01'];\nlet $targetList;\n\nconst init = () => {\n  $targetList = document.querySelectorAll('[data-js=\"reveal\"]');\n\n  setup();\n\n  window.addEventListener('scroll', onScroll, false);\n  window.dispatchEvent(new Event('scroll'));\n};\n\nconst getArrayRandomValue = array =>\n  array[Math.floor(Math.random() * array.length)];\n\nconst setup = () => {\n  for (const $target of $targetList) {\n    const content = $target.innerHTML;\n    const color =\n      'revealColor' in $target.dataset\n        ? $target.dataset.revealColor\n        : getArrayRandomValue(COLOR_LIST);\n    $target.innerHTML = `<span data-reveal=\"content\"><div data-reveal=\"cover\" style=\"background-color:${color}\"></div><span data-reveal=\"text\">${content}</span></span>`;\n  }\n};\n\nconst onScroll = () => {\n  const windowH = window.innerHeight;\n  const scrollTop =\n    document.documentElement.scrollTop || document.body.scrollTop;\n  const isMostScroll = document.body.clientHeight <= scrollTop + windowH;\n\n  for (const $target of $targetList) {\n    if ($target.classList.contains('loaded')) continue;\n\n    const rect = $target.getBoundingClientRect();\n    const top = rect.top + scrollTop;\n    if (isMostScroll || top <= scrollTop + windowH * 0.8)\n      $target.classList.add('loaded');\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', init, false);\n\n\n\n\nfunction hidePlug (){\n  if (localStorage.length > 1) {\n    plugContainer.remove()\n  }\n}"],"names":["$krGWQ","parcelRequire","$fA0uA","$b9e6b9b2c2f99fcc$var$queueBtn","document","querySelector","$b9e6b9b2c2f99fcc$var$watchedBtn","$b9e6b9b2c2f99fcc$var$totalPages","$b9e6b9b2c2f99fcc$var$tab","addEventListener","$b9e6b9b2c2f99fcc$var$onclickQueue","$b9e6b9b2c2f99fcc$var$onClickWatched","disabled","$b9e6b9b2c2f99fcc$var$paginate","array","pageSize","pageNumber","slice","$b9e6b9b2c2f99fcc$export$d72a0d389166c6d4","watchedMovies","localStorage","getItem","arrayOFWatched","JSON","parse","total","length","Math","ceil","pag","classList","remove","add","markup","createFilmsGallery","gallery","innerHTML","$2nhTy","default","reset","$b9e6b9b2c2f99fcc$var$renderPagin","on","$b9e6b9b2c2f99fcc$var$getQueueItems","queueMovies","arrayOFQueue","event","$gXu43","topFunction","currentPage","page","arrayForMarkup","$b9e6b9b2c2f99fcc$var$clickBtn","e","$b5rV1","onHoverBtnCLick","first","textContent","last","$gtTVS","deletePageButton","cardModal","$9625bde4e5259b06$var$plugContainer","$9625bde4e5259b06$var$COLOR_LIST","$9625bde4e5259b06$var$$targetList","$9625bde4e5259b06$var$setup","$target","content","color","dataset","revealColor","floor","random","$9625bde4e5259b06$var$onScroll","windowH","window","innerHeight","scrollTop","documentElement","body","isMostScroll","clientHeight","contains","top","getBoundingClientRect","querySelectorAll","dispatchEvent","Event"],"version":3,"file":"library.eaa3c379.js.map"}