{"mappings":"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","sources":["src/js/library.js","src/js/library-buttons.js","src/js/plug-for-library.js"],"sourcesContent":["import './refs';\nimport { getWatchedItems } from './library-buttons';\nimport { createFilmsGallery } from './markups';\nimport pagination from './pagination';\nimport './plug-for-library';\n\nimport './modal'\n\nimport { gallery } from './refs';\nimport { topFunction } from './functions';\nimport modalteam from './modalteam';\n\n//const pagin = pagination();\nconst paginate = (array, pageSize, pageNumber) => {\n  return array.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n};\n\ngetWatchedItems();\n// рендерим пагинацию остальных страниц\npagination.on('beforeMove', event => {\n  topFunction();\n  // получаем номер активной страницы на кнопках\n  const currentPage = event.page;\n \n  // создаем массив для рендера по 20 айтемов на страницу\n  const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n\n  const markup = createFilmsGallery(arrayForMarkup);\n  gallery.innerHTML = markup;\n});\n","import { createFilmsGallery } from './markups';\nimport pagination from './pagination';\nimport { topFunction } from './functions';\nimport { pag, gallery } from './refs';\n\nconst queueBtn = document.querySelector('[data-queue=\"data-queue\"]');\nconst watchedBtn = document.querySelector('[data-watched=\"data-watched\"]');\n\nqueueBtn.addEventListener('click', onclickQueue);\nwatchedBtn.addEventListener('click', onClickWatched);\nqueueBtn.disabled = false;\n\n// функция, которая режет массив\nconst paginate = (array, pageSize, pageNumber) => {\n  return array.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n};\n\n// функции получения данных из локалстора и рендеринга их\n\nexport function getWatchedItems() {\n  const watchedMovies = localStorage.getItem('watched');\n  let arrayOFWatched = JSON.parse(watchedMovies) || [];\n  const total = arrayOFWatched.length;\n\n  // включаем пагинацию если больше 20 фильмов\n  if (arrayOFWatched.length > 20) {\n    pag.classList.remove('is-hidden');\n  } else if (arrayOFWatched.length <= 20) {\n    pag.classList.add('is-hidden');\n  }\n\n  // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(paginate(arrayOFWatched, 20, 1), true);\n  gallery.innerHTML = markup;\n  pagination.reset(total);\n  return arrayOFWatched;\n}\n\nfunction getQueueItems() {\n  const queueMovies = localStorage.getItem('queue');\n  let arrayOFQueue = JSON.parse(queueMovies) || [];\n  const total = arrayOFQueue.length;\n\n  // включаем пагинацию если больше 20 фильмов\n  if (arrayOFQueue.length > 20) {\n    pag.classList.remove('is-hidden');\n  } else if (arrayOFQueue.length <= 20) {\n    pag.classList.add('is-hidden');\n  }\n\n  // рендерим первые 20 фильмов\n  const markup = createFilmsGallery(paginate(arrayOFQueue, 20, 1));\n  gallery.innerHTML = markup;\n  pagination.reset(total);\n  return arrayOFQueue;\n}\n\n// функции нажатия на кнопки\n\nfunction onClickWatched(e) {\n  getWatchedItems();\n\n  // рендерим пагинацию остальных страниц\n  pagination.on('beforeMove', event => {\n    topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getWatchedItems(), 20, currentPage);\n    console.log(arrayForMarkup);\n    const markup = createFilmsGallery(arrayForMarkup);\n    gallery.innerHTML = markup;\n  });\n\n  // вкл/выкл кнопок\n  queueBtn.disabled = false;\n  queueBtn.classList.remove('active');\n  watchedBtn.classList.add('active');\n  watchedBtn.disabled = true;\n}\n\nfunction onclickQueue(e) {\n  getQueueItems();\n\n  // рендерим пагинацию остальных страниц\n  pagination.on('beforeMove', event => {\n    topFunction();\n    // получаем номер активной страницы на кнопках\n    const currentPage = event.page;\n    // создаем массив для рендера по 20 айтемов на страницу\n    const arrayForMarkup = paginate(getQueueItems(), 20, currentPage);\n    console.log(arrayForMarkup);\n    const markup = createFilmsGallery(arrayForMarkup);\n    gallery.innerHTML = markup;\n  });\n\n  // вкл/выкл кнопок\n  watchedBtn.disabled = false;\n  queueBtn.classList.add('active');\n  watchedBtn.classList.remove('active');\n  queueBtn.disabled = true;\n}\n","const COLOR_LIST = ['#ff6b01'];\nlet $targetList;\n\nconst init = () => {\n\n $targetList = document.querySelectorAll('[data-js=\"reveal\"]');\n\n setup();\n\n window.addEventListener('scroll',onScroll,false);\n window.dispatchEvent(new Event('scroll'));\n\n}\n\nconst getArrayRandomValue = (array) => array[Math.floor(Math.random() * array.length)];\n\nconst setup = () => {\n\n for (const $target of $targetList) {\n\n  const content = $target.innerHTML;\n  const color   = 'revealColor' in $target.dataset ? $target.dataset.revealColor : getArrayRandomValue(COLOR_LIST);\n  $target.innerHTML = `<span data-reveal=\"content\"><div data-reveal=\"cover\" style=\"background-color:${color}\"></div><span data-reveal=\"text\">${content}</span></span>`;\n\n }\n\n}\n\nconst onScroll = () => {\n\n const windowH      = window.innerHeight;\n const scrollTop    = document.documentElement.scrollTop || document.body.scrollTop;\n const isMostScroll = document.body.clientHeight <= scrollTop + windowH;\n\n for (const $target of $targetList) {\n\n  if ($target.classList.contains('loaded')) continue;\n\n  const rect = $target.getBoundingClientRect();\n  const top  = rect.top + scrollTop;\n  if (isMostScroll || top <= scrollTop + (windowH * .8)) $target.classList.add('loaded');\n\n }\n\n}\n\ndocument.addEventListener('DOMContentLoaded',init,false);"],"names":["$4Nugj","parcelRequire","$LW3sO","$30be1b8188bd888b$var$queueBtn","document","querySelector","$30be1b8188bd888b$var$watchedBtn","addEventListener","e","$30be1b8188bd888b$var$getQueueItems","$jcFG7","default","on","event","$cKDzr","topFunction","currentPage","page","arrayForMarkup","$30be1b8188bd888b$var$paginate","console","log","markup","createFilmsGallery","gallery","innerHTML","disabled","classList","add","remove","$30be1b8188bd888b$export$d72a0d389166c6d4","array","pageSize","pageNumber","slice","watchedMovies","localStorage","getItem","arrayOFWatched","JSON","parse","total","length","pag","reset","queueMovies","arrayOFQueue","$103f778c81e94144$var$$targetList","$103f778c81e94144$var$COLOR_LIST","$103f778c81e94144$var$setup","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","$target","value","content","color","dataset","revealColor","Math","floor","random","concat","err","return","$103f778c81e94144$var$onScroll","windowH","window","innerHeight","scrollTop","documentElement","body","isMostScroll","clientHeight","contains","top","getBoundingClientRect","querySelectorAll","dispatchEvent","Event"],"version":3,"file":"library.25f76f39.js.map"}